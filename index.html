<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>My first three.js app</title>
    <style>
        body {
            margin: 0;
        }
    </style>
</head>
<body>
<script type="module">
    import {Scene, WebGLRenderer, PerspectiveCamera, AxesHelper, PointLight} from './js/three.module.js'
    import {OBJLoader} from './js/objloader.module.js'
    import {OrbitControls} from "./js/orbitcontrols.module.js";
    import Stats from "./js/stats.module.js";

    const url = 'https://core-ruangguru.s3.ap-southeast-1.amazonaws.com/3dobject/model.obj'

    const scene = new Scene()
    scene.add(new AxesHelper(5))

    const light = new PointLight()
    light.position.set(2.5, 7.5, 15)
    scene.add(light)

    const camera = new PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)
    camera.position.z = 3

    const renderer = new WebGLRenderer()
    renderer.setSize(window.innerWidth, window.innerHeight)
    document.body.appendChild(renderer.domElement)

    const controls = new OrbitControls(camera, renderer.domElement)
    controls.enableDamping = true

    // const material = new THREE.MeshBasicMaterial({ color: 0x00ff00, wireframe: true })

    const objLoader = new OBJLoader()
    objLoader.load(
        url,
        (object) => scene.add(object),
        (xhr) => console.log((xhr.loaded / xhr.total) * 100 + '% loaded'),
        (error) => console.log(error)
    )

    window.addEventListener('resize', onWindowResize, false)

    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight
        camera.updateProjectionMatrix()
        renderer.setSize(window.innerWidth, window.innerHeight)
        render()
    }

    const stats = Stats()
    document.body.appendChild(stats.dom)

    function render() {
        renderer.render(scene, camera)
    }

    function animate() {
        requestAnimationFrame(animate)
        controls.update()
        render()
        stats.update()
    }

    animate()

</script>
</body>
</html>